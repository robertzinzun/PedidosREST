{% extends 'base.html' %}
{% block contenido %}
<script>
    function eliminarUsuario(id,nombre){
        document.getElementById("id").value=id;
        document.getElementById("msg").innerHTML='¿ Estas seguro de eliminar al usuario <b>'+nombre+' </b>?';
    }
    function eliminar(){
        var id=document.getElementById("id").value;
        location.href='/usuarios/eliminar/'+id;
    }
</script>
<div class="container">
<div class="page-header">
    <h1 class="bg-primary text-center">USUARIOS</h1>
</div>
     {% if current_user.is_authenticated and current_user.is_admin()%}
    <a href="/usuarios/nuevo" class="btn btn-default btn-sm">
          <span class="glyphicon glyphicon-plus-sign"></span> Agregar usuario
    </a>
    {% endif %}
    <br>
    <table class="table table-bordered">
        <th class="info">Nombre</th>
        <th class="info">Dirección</th>
        <th class="info">Telefono</th>
        <th class="info">Email</th>
        <th class="info">Tipo</th>
        <th class="info">Estatus</th>
        <th class="info">Editar</th>
        <th class="info">Eliminar</th>
        {% for user in usuarios %}
            <tr>
                <td>{{user.nombreCompleto}}</td>
                <td>{{user.direccion}}</td>
                <td>{{user.telefono}}</td>
                <td>{{user.email}}</td>
                {% if user.tipo=='A' %}
                    <td><span class="glyphicon glyphicon-king">Admin</span></td>
                {% else %}
                    <td><span class="glyphicon glyphicon-pawn">Cliente</span></td>
                {% endif %}
                {% if user.estatus=='A' %}
                    <td><span class="glyphicon glyphicon-ok-sign">Activo</span></td>
                {% else %}
                    {% if user.estatus=='B' %}
                        <td><span class="glyphicon glyphicon-remove-sign">Baja</span></td>
                    {% else %}
                        <td><span class="glyphicon glyphicon-question-sign">Pendiente</span></td>
                    {% endif %}
                {% endif %}
                {% if current_user.is_authenticated and current_user.is_admin()%}
                <td>
                    <a href="/usuarios/editar/{{user.idUsuario}}">
                        <span class="glyphicon glyphicon-edit"></span>
                    </a>
                </td>
                <td>
                    <a  onclick="eliminarUsuario({{user.idUsuario}},'{{user.nombreCompleto}}')" data-toggle="modal" data-target="#myModal">
                        <span class="glyphicon glyphicon-trash"></span>
                    </a>
                </td>
                {% endif %}
            </tr>
        {% endfor %}
    </table>
    <div id="myModal" class="modal fade" role="dialog">
        <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Eliminación de Usuarios</h4>
          </div>
          <div class="modal-body">
            <div id="msg"></div>
          </div>
          <div class="modal-footer">
              <input type="hidden" id="id">
              <button type="button" class="btn btn-default" onclick="eliminar()">
                 <span class="glyphicon glyphicon-ok-circle"></span> Aceptar
              </button>
              <button type="button" class="btn btn-default" data-dismiss="modal">
                <span class="glyphicon glyphicon-remove-sign"></span> Cancelar
              </button>
          </div>
        </div>
        </div>
    </div>
</div>
{% endblock %}